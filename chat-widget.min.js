!function(){"use strict";function n(n,e){const{elements:t,actions:o}=n,{input:r,sendBtn:a,toggleBtn:i,closeBtn:s}=t;i.addEventListener("click",()=>{o.toggleOpen()}),s.addEventListener("click",()=>{o.close()});const l=async()=>{const n=r.value.trim();if(n){o.appendMessage(n,"user"),r.value="";try{const t=await async function(n,e){try{const t="https://parsperfect.ir/api/support/messages",o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-Tenant-Id":e},body:JSON.stringify({message:n})});if(!o.ok){const n=await o.json();throw new Error(n.message||"Network response was not ok")}return(await o.json()).message}catch(n){throw console.error("Chat Widget API Error:",n),n}}(n,e.tenantId);o.appendMessage(t,"bot")}catch(n){o.appendMessage("Error sending message. Please try again.","bot")}}};a.addEventListener("click",l),r.addEventListener("keypress",n=>{"Enter"===n.key&&l()})}const e={title:"Voca Support",subtitle:"Ask us anything",primaryColor:"#4F46E5",secondaryColor:"#ffffff",textColor:"#1F2937",backgroundColor:"#ffffff",serverUrl:"https://parsperfect.ir",tenantId:"PleskDB",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',position:"bottom-right",startOpen:!1};!function(){const t=function(n={}){return{...e,...n}}(window.MyChatWidgetConfig||{}),o=function(){if(window.__MY_CHAT_WIDGET_LOADED__)return console.warn("Chat Widget is already loaded."),null;window.__MY_CHAT_WIDGET_LOADED__=!0;const n=document.createElement("div");return n.id="chat-widget-host",document.body.appendChild(n),n.attachShadow({mode:"open"})}();if(!o)return;!function(n,e){const t=document.createElement("style");t.textContent=(n=>`\n    :host {\n        --primary-color: ${n.primaryColor};\n        --secondary-color: ${n.secondaryColor};\n        --text-color: ${n.textColor};\n        --bg-color: ${n.backgroundColor};\n        --font-family: ${n.fontFamily};\n        z-index: 9999;\n        position: fixed;\n        bottom: 20px;\n        ${"bottom-left"===n.position?"left: 20px;":"right: 20px;"}\n        font-family: var(--font-family);\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .widget-container {\n        display: flex;\n        flex-direction: column;\n        width: 350px;\n        height: 500px;\n        max-height: 80vh;\n        background: var(--bg-color);\n        border-radius: 16px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n        overflow: hidden;\n        transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;\n        opacity: 0;\n        visibility: hidden;\n        transform: translateY(20px);\n        position: absolute;\n        bottom: 80px;\n        right: 0;\n    }\n\n    .widget-container.open {\n        opacity: 1;\n        visibility: visible;\n        transform: translateY(0);\n    }\n\n    .widget-header {\n        background: var(--primary-color);\n        color: var(--secondary-color);\n        padding: 16px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        border-top-left-radius: 16px;\n        border-top-right-radius: 16px;\n    }\n\n    .widget-header h3 {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n    }\n\n    .widget-header p {\n        margin: 4px 0 0;\n        font-size: 12px;\n        opacity: 0.9;\n    }\n\n    .close-btn {\n        background: none;\n        border: none;\n        color: white;\n        cursor: pointer;\n        font-size: 20px;\n        padding: 4px;\n        line-height: 1;\n    }\n\n    .chat-messages {\n        flex: 1;\n        padding: 16px;\n        overflow-y: auto;\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        background: #f9fafb;\n    }\n\n    .message {\n        max-width: 80%;\n        padding: 10px 14px;\n        border-radius: 12px;\n        font-size: 14px;\n        line-height: 1.4;\n        word-wrap: break-word;\n    }\n\n    .message.user {\n        align-self: flex-end;\n        background: var(--primary-color);\n        color: var(--secondary-color);\n        border-bottom-right-radius: 2px;\n    }\n\n    .message.bot {\n        align-self: flex-start;\n        background: #e5e7eb;\n        color: var(--text-color);\n        border-bottom-left-radius: 2px;\n    }\n\n    .input-area {\n        padding: 12px;\n        border-top: 1px solid #e5e7eb;\n        display: flex;\n        gap: 8px;\n        background: white;\n    }\n\n    .input-area input {\n        flex: 1;\n        padding: 10px;\n        border: 1px solid #d1d5db;\n        border-radius: 20px;\n        outline: none;\n        font-size: 14px;\n        transition: border-color 0.2s;\n    }\n\n    .input-area input:focus {\n        border-color: var(--primary-color);\n    }\n\n    .send-btn {\n        background: var(--primary-color);\n        color: white;\n        border: none;\n        border-radius: 50%;\n        width: 36px;\n        height: 36px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        transition: transform 0.1s;\n    }\n\n    .send-btn:active {\n        transform: scale(0.95);\n    }\n\n    .toggle-btn {\n        width: 60px;\n        height: 60px;\n        border-radius: 30px;\n        background: var(--primary-color);\n        color: white;\n        border: none;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: transform 0.2s;\n        z-index: 10000;\n    }\n\n    .toggle-btn:hover {\n        transform: scale(1.05);\n    }\n\n    .toggle-btn svg {\n        width: 28px;\n        height: 28px;\n        fill: currentColor;\n    }\n`)(e),n.appendChild(t)}(o,t);const r=function(n,e){const t=document.createElement("div");t.className="widget-container";const o=document.createElement("div");o.className="widget-header",o.innerHTML=`\n        <div>\n            <h3>${e.title}</h3>\n            <p>${e.subtitle}</p>\n        </div>\n        <button class="close-btn">&times;</button>\n    `;const r=document.createElement("div");r.className="chat-messages";const a=document.createElement("div");a.className="input-area";const i=document.createElement("input");i.type="text",i.placeholder="Type a message...";const s=document.createElement("button");s.className="send-btn",s.innerHTML='\n        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">\n            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>\n        </svg>\n    ',a.appendChild(i),a.appendChild(s),t.appendChild(o),t.appendChild(r),t.appendChild(a);const l=document.createElement("button");return l.className="toggle-btn",l.innerHTML='\n        <svg viewBox="0 0 24 24">\n            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"></path>\n        </svg>\n    ',n.appendChild(t),n.appendChild(l),{elements:{container:t,input:i,sendBtn:s,toggleBtn:l,closeBtn:o.querySelector(".close-btn"),messagesList:r},actions:{appendMessage:(n,e="user")=>{const t=document.createElement("div");t.className=`message ${e}`,t.textContent=n,r.appendChild(t),r.scrollTop=r.scrollHeight},toggleOpen:()=>{t.classList.toggle("open"),t.classList.contains("open")?(i.focus(),l.style.display="none"):l.style.display="flex"},close:()=>{t.classList.remove("open"),l.style.display="flex"}}}}(o,t);n(r,t),t.startOpen&&r.actions.toggleOpen()}()}();
//# sourceMappingURL=chat-widget.min.js.map
